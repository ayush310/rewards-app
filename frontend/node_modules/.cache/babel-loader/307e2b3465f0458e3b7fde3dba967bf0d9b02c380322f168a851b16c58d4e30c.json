{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ayushkumarsingh/Desktop/Workspace/Company Assignments/capillary_assngmt/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ayushkumarsingh/Desktop/Workspace/Company Assignments/capillary_assngmt/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ayushkumarsingh/Desktop/Workspace/Company Assignments/capillary_assngmt/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button}from\"@chakra-ui/button\";import{FormControl,FormLabel}from\"@chakra-ui/form-control\";import{Input,InputGroup,InputRightElement}from\"@chakra-ui/input\";import{VStack}from\"@chakra-ui/layout\";import{useState}from\"react\";import axios from\"axios\";import{useToast}from\"@chakra-ui/react\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleClick=function handleClick(){return setShow(!show);};var toast=useToast();var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var history=useHistory();var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,_yield$axios$post,data,_error$response,_error$response$data,errorMessage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(true);if(!(!email||!password)){_context.next=5;break;}toast({title:\"Please Fill all the Feilds\",status:\"warning\",duration:5000,isClosable:true,position:\"bottom\"});setLoading(false);return _context.abrupt(\"return\");case 5:_context.prev=5;config={headers:{\"Content-type\":\"application/json\"}};_context.next=9;return axios.post(\"api/user/login\",{email:email,password:password},config);case 9:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(JSON.stringify(data));toast({title:\"Login Successful\",status:\"success\",duration:3000,isClosable:true,position:\"bottom\"});toast({title:\"Welcome, \".concat(data.name),status:\"success\",duration:5000,isClosable:true,position:\"top\"});localStorage.setItem(\"userInfo\",JSON.stringify(data));setLoading(false);history.push(\"/dashboard\");_context.next=24;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](5);errorMessage=((_error$response=_context.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"An error occurred.\";toast({title:\"Error Occurred!\",description:errorMessage,status:\"error\",duration:5000,isClosable:true,position:\"bottom\"});setLoading(false);case 24:case\"end\":return _context.stop();}},_callee,null,[[5,19]]);}));return function submitHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(VStack,{spacing:\"10px\",children:[/*#__PURE__*/_jsxs(FormControl,{id:\"email\",isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Input,{value:email,type:\"email\",placeholder:\"Enter Your Email Address\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(FormControl,{id:\"password\",isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Password\"}),/*#__PURE__*/_jsxs(InputGroup,{size:\"md\",children:[/*#__PURE__*/_jsx(Input,{value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:show?\"text\":\"password\",placeholder:\"Enter password\"}),/*#__PURE__*/_jsx(InputRightElement,{width:\"4.5rem\",children:/*#__PURE__*/_jsx(Button,{h:\"1.75rem\",size:\"sm\",onClick:handleClick,children:show?\"Hide\":\"Show\"})})]})]}),/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",width:\"100%\",style:{marginTop:15},onClick:submitHandler,isLoading:loading,children:\"Login\"}),/*#__PURE__*/_jsx(Button,{variant:\"solid\",colorScheme:\"red\",width:\"100%\",onClick:function onClick(){setEmail(\"guest@capillary.com\");setPassword(\"abcd1234\");},children:\"Get Guest User Credentials\"})]});};export default Login;","map":{"version":3,"names":["Button","FormControl","FormLabel","Input","InputGroup","InputRightElement","VStack","useState","axios","useToast","useHistory","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","show","setShow","handleClick","toast","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","loading","setLoading","history","submitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","_yield$axios$post","data","_error$response","_error$response$data","errorMessage","wrap","_callee$","_context","prev","next","title","status","duration","isClosable","position","abrupt","headers","post","sent","console","log","JSON","stringify","concat","name","localStorage","setItem","push","t0","response","message","description","stop","apply","arguments","spacing","children","id","isRequired","value","type","placeholder","onChange","e","target","size","width","h","onClick","colorScheme","style","marginTop","isLoading","variant"],"sources":["/Users/ayushkumarsingh/Desktop/Workspace/Company Assignments/capillary_assngmt/frontend/src/components/Login.js"],"sourcesContent":["import { Button } from \"@chakra-ui/button\";\nimport { FormControl, FormLabel } from \"@chakra-ui/form-control\";\nimport { Input, InputGroup, InputRightElement } from \"@chakra-ui/input\";\nimport { VStack } from \"@chakra-ui/layout\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useToast } from \"@chakra-ui/react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Login = () => {\n  const [show, setShow] = useState(false);\n  const handleClick = () => setShow(!show);\n  const toast = useToast();\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [loading, setLoading] = useState(false);\n\n  const history = useHistory();\n\n  const submitHandler = async () => {\n    setLoading(true);\n    if (!email || !password) {\n      toast({\n        title: \"Please Fill all the Feilds\",\n        status: \"warning\",\n        duration: 5000,\n        isClosable: true,\n        position: \"bottom\",\n      });\n      setLoading(false);\n      return;\n    }\n\n    // console.log(email, password);\n\n    try {\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n      };\n\n      const { data } = await axios.post(\n        \"api/user/login\",\n        { email, password },\n        config\n      );\n\n      console.log(JSON.stringify(data));\n\n      toast({\n        title: \"Login Successful\",\n        status: \"success\",\n        duration: 3000,\n        isClosable: true,\n        position: \"bottom\",\n      });\n\n      toast({\n        title: `Welcome, ${data.name}`,\n        status: \"success\",\n        duration: 5000,\n        isClosable: true,\n        position: \"top\",\n      });\n\n      localStorage.setItem(\"userInfo\", JSON.stringify(data));\n      setLoading(false);\n      history.push(\"/dashboard\");\n    } catch (error) {\n      const errorMessage =\n        error.response?.data?.message || \"An error occurred.\";\n\n      toast({\n        title: \"Error Occurred!\",\n        description: errorMessage,\n        status: \"error\",\n        duration: 5000,\n        isClosable: true,\n        position: \"bottom\",\n      });\n      setLoading(false);\n    }\n  };\n\n  return (\n    <VStack spacing=\"10px\">\n      <FormControl id=\"email\" isRequired>\n        <FormLabel>Email Address</FormLabel>\n        <Input\n          value={email}\n          type=\"email\"\n          placeholder=\"Enter Your Email Address\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n      </FormControl>\n      <FormControl id=\"password\" isRequired>\n        <FormLabel>Password</FormLabel>\n        <InputGroup size=\"md\">\n          <Input\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            type={show ? \"text\" : \"password\"}\n            placeholder=\"Enter password\"\n          />\n          <InputRightElement width=\"4.5rem\">\n            <Button h=\"1.75rem\" size=\"sm\" onClick={handleClick}>\n              {show ? \"Hide\" : \"Show\"}\n            </Button>\n          </InputRightElement>\n        </InputGroup>\n      </FormControl>\n      <Button\n        colorScheme=\"blue\"\n        width=\"100%\"\n        style={{ marginTop: 15 }}\n        onClick={submitHandler}\n        isLoading={loading}\n      >\n        Login\n      </Button>\n      <Button\n        variant=\"solid\"\n        colorScheme=\"red\"\n        width=\"100%\"\n        onClick={() => {\n          setEmail(\"guest@capillary.com\");\n          setPassword(\"abcd1234\");\n        }}\n      >\n        Get Guest User Credentials\n      </Button>\n    </VStack>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}